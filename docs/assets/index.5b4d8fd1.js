const R=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=i(s);fetch(s.href,l)}};R();function S(t){return t>=0&&t<12}function V(t,e){return t>>2===e>>2}function z(t,e){return Math.abs((t>>2)-(e>>2))===1}class N{constructor(){this.colorToMove=h.Yellow,this.history=[],this.status=M.OnGoing,this.pool=[],this.hashTable=[],this.hash=0,this.movesSinceLastCapture=0,this.board=[new v(n.Xiang,h.Yellow),null,null,new v(n.Jiang,h.Blue),new v(n.Wang,h.Yellow),new v(n.Zi,h.Yellow),new v(n.Zi,h.Blue),new v(n.Wang,h.Blue),new v(n.Jiang,h.Yellow),null,null,new v(n.Xiang,h.Blue)];for(let e=0;e<22;e++)this.hashTable[e]=crypto.getRandomValues(new Uint32Array(10));this.hashTableOther=crypto.getRandomValues(new Uint32Array(2)),this.calculateHash()}static fromFEN(e){const[i,o,s,l]=e.split(" ");let r=[];for(const d of i){let u=parseInt(d);isNaN(u)?r.push(null):r.push(new v(u%5,Math.floor(u/5)))}let a=[];for(const d of o){let u=parseInt(d);a.push(new v(u%5,Math.floor(u/5)))}let c=new N;c.board=r,c.pool=a,c.colorToMove=parseInt(s[0]),c.status=parseInt(s[1]),c.movesSinceLastCapture=parseInt(l);for(let d=0;d<22;d++)c.hashTable[d]=crypto.getRandomValues(new Uint32Array(10));return c.hashTableOther=crypto.getRandomValues(new Uint32Array(2)),c.calculateHash(),c}toFEN(){let e="";return e+=this.board.map(i=>i===null?"*":(i.type+5*i.color).toString()).join(""),e+=" ",e+=this.pool.filter(i=>i!==void 0).map(i=>(i.type+5*i.color).toString()).join(""),e+=" ",e+=this.colorToMove,e+=this.status,e+=" ",e+=this.movesSinceLastCapture,e}calculateHash(){this.hash=0;for(const[e,i]of this.board.entries())i!=null&&(this.hash^=this.hashTable[e][i.type+i.color*5]);for(const[e,i]of this.pool.entries())this.hash^=this.hashTable[e+12][i.type+i.color*5];this.hash^=this.hashTableOther[this.colorToMove]}*piecesForColor(e){var i;for(const o of this.board.entries())e===((i=o[1])==null?void 0:i.color)&&(yield o)}*emptySquares(){for(const e of this.board.entries())e[1]===null&&(yield e)}isMyPieceOnIndex(e,i){var o;return((o=this.board[i])==null?void 0:o.color)===e}isOpponentPieceOnIndex(e,i){var o;return((o=this.board[i])==null?void 0:o.color)===(e^1)}makeMove(e){if(this.history.push({board:[...this.board],status:this.status,pool:[...this.pool],msc:this.movesSinceLastCapture}),e.flag===w.Revive)this.board[e.to]=this.pool[e.from-12],delete this.pool[e.from-12],this.pool=this.pool.filter(i=>i!==void 0).sort((i,o)=>i.color-o.color);else{const i=this.board[e.from];if(this.board[e.from]=null,e.flag===w.Capture){const o=Object.create(this.board[e.to]);this.board[e.to]=i,o.type===n.Wang&&this.status===M.OnGoing?this.status=o.color===h.Yellow?M.BlueWin:M.YellowWin:(o.color^=1,o.type===n.Hou?this.pool.push(new v(n.Zi,o.color)):this.pool.push(o))}else if(e.flag===w.CapturePromotion){const o=Object.create(this.board[e.to]);this.board[e.to]=i!==null?new v(n.Hou,i.color):null,o.type===n.Wang&&this.status===M.OnGoing?this.status=o.color===h.Yellow?M.BlueWin:M.YellowWin:(o.color^=1,this.pool.push(o))}else e.flag===w.QuietPromotion?this.board[e.to]=i!==null?new v(n.Hou,i.color):null:e.flag===w.Quiet&&(this.board[e.to]=i)}this.colorToMove^=1,this.calculateHash(),e.flag===w.Capture?this.movesSinceLastCapture=0:this.movesSinceLastCapture++,this.status===M.OnGoing&&this.movesSinceLastCapture>=20&&(this.status=M.Draw)}nullMove(){this.history.push({board:[...this.board],status:this.status,pool:[...this.pool],msc:this.movesSinceLastCapture}),this.colorToMove^=1,this.calculateHash()}undoMove(){const e=this.history.pop();this.board=e.board,this.status=e.status,this.pool=e.pool,this.colorToMove^=1,this.movesSinceLastCapture=e.msc,this.calculateHash()}*legalMoves(e){let i=e===void 0?this.piecesForColor(this.colorToMove):Array.from(this.piecesForColor(this.colorToMove)).filter(o=>{var s;return e((s=o[1])==null?void 0:s.type)});for(const[o,s]of i)if(s!==null)for(const l of s.pieceDirections()){let r,a;switch(l){case f.N:r=o-4,S(r)&&!this.isMyPieceOnIndex(s.color,r)&&(a=new y(o,r));break;case f.S:r=o+4,S(r)&&!this.isMyPieceOnIndex(s.color,r)&&(a=new y(o,r));break;case f.W:r=o-1,S(r)&&V(o,r)&&!this.isMyPieceOnIndex(s.color,r)&&(a=new y(o,r));break;case f.E:r=o+1,S(r)&&V(o,r)&&!this.isMyPieceOnIndex(s.color,r)&&(a=new y(o,r));break;case f.NW:r=o-5,S(r)&&z(o,r)&&!this.isMyPieceOnIndex(s.color,r)&&(a=new y(o,r));break;case f.NE:r=o-3,S(r)&&z(o,r)&&!this.isMyPieceOnIndex(s.color,r)&&(a=new y(o,r));break;case f.SW:r=o+3,S(r)&&z(o,r)&&!this.isMyPieceOnIndex(s.color,r)&&(a=new y(o,r));break;case f.SE:r=o+5,S(r)&&z(o,r)&&!this.isMyPieceOnIndex(s.color,r)&&(a=new y(o,r));break}a!==void 0&&(this.isOpponentPieceOnIndex(this.colorToMove,a.to)&&(a.flag=w.Capture),s.type===n.Zi&&(a.to%4===0||a.to%4===3)&&(a.flag===w.Capture?a.flag=w.CapturePromotion:a.flag=w.QuietPromotion),yield a)}for(const[o,s]of this.pool.entries())if(s!==void 0&&s.color===this.colorToMove)for(const[l]of this.emptySquares())yield new y(12+o,l,w.Revive)}}var w=(t=>(t[t.CapturePromotion=0]="CapturePromotion",t[t.QuietPromotion=1]="QuietPromotion",t[t.Capture=2]="Capture",t[t.Revive=3]="Revive",t[t.Quiet=4]="Quiet",t))(w||{}),M=(t=>(t[t.OnGoing=0]="OnGoing",t[t.YellowWin=1]="YellowWin",t[t.BlueWin=2]="BlueWin",t[t.Draw=3]="Draw",t))(M||{});class y{constructor(e,i,o=4){this.from=e,this.to=i,this.flag=o}}var n=(t=>(t[t.Jiang=0]="Jiang",t[t.Wang=1]="Wang",t[t.Xiang=2]="Xiang",t[t.Zi=3]="Zi",t[t.Hou=4]="Hou",t))(n||{}),h=(t=>(t[t.Yellow=0]="Yellow",t[t.Blue=1]="Blue",t))(h||{});class v{constructor(e,i){this.type=e,this.color=i}pieceDirections(){const e=this;switch(e.type){case 1:return[0,1,2,3,4,5,6,7];case 0:return[f.N,f.E,f.S,f.W];case 2:return[f.NE,f.NW,f.SE,f.SW];case 3:return e.color===0?[f.E]:[f.W];case 4:return e.color===0?[0,2,4,5,6,7]:[0,1,2,3,4,6]}}pieceToString(){return"\u5C06\u738B\u76F8\u5B50\u4FAF"[this.type]}}var f=(t=>(t[t.N=0]="N",t[t.NW=1]="NW",t[t.W=2]="W",t[t.SW=3]="SW",t[t.S=4]="S",t[t.SE=5]="SE",t[t.E=6]="E",t[t.NE=7]="NE",t))(f||{});const g=66666,j=2e6,q=95,Z=8,T=g*Math.PI;function E(t,e,i){if(t.status===M.YellowWin)return t.colorToMove===h.Yellow?g-e:-g+e;if(t.status===M.BlueWin)return t.colorToMove===h.Blue?g-e:-g+e;if(t.status===M.Draw)return 0;let o=0;for(const s of t.board){if(s===null)continue;const l=t.colorToMove===(s==null?void 0:s.color)?1:-1;switch(s==null?void 0:s.type){case n.Wang:o+=2e4*l;break;case n.Zi:o+=100*l;break;case n.Jiang:o+=250*l;break;case n.Xiang:o+=250*l;break;case n.Hou:o+=300*l;break}}for(const s of t.pool){const l=t.colorToMove===(s==null?void 0:s.color)?1:-1;switch(s==null?void 0:s.type){case n.Zi:o+=40*l;break;case n.Jiang:o+=80*l;break;case n.Xiang:o+=80*l;break}}return i&&(o+=Array.from(t.legalMoves(s=>s===n.Wang)).length*10,o+=Array.from(t.legalMoves(s=>s===n.Jiang||s===n.Xiang||s===n.Hou)).length*25,t.nullMove(),o-=Array.from(t.legalMoves(s=>s===n.Wang)).length*10,o-=Array.from(t.legalMoves(s=>s===n.Jiang||s===n.Xiang||s===n.Hou)).length*25,t.undoMove()),o}const G={lower:-g,upper:g};class A{constructor(){this.scoreTable=new Map,this.moveTable=new Map,this.nodes=0,this.depth=0,this.seldepth=0,this.startTime=new Date().getTime(),this.durationMS=600}bound(e,i,o,s,l,r){this.nodes++,this.seldepth=Math.max(s,this.seldepth);let a=this.scoreTable.get({hash:e.hash,depth:Math.max(o,0),isRoot:l});if(a===void 0&&(a=G),a.lower>=i&&(!l||this.moveTable.has(e.hash)))return a.lower;if(a.upper<i)return a.upper;if(new Date().getTime()-this.startTime>this.durationMS)return T;let c=-g;if(o<=0){let d=E(e,s,r);c=Math.max(c,d)}if(c<=i){let d=this.moveTable.get(e.hash);if(d!==void 0)if(e.makeMove(d),o>0||E(e,s)>=q){let u=-this.bound(e,1-i,o-1,s+1,!1,r);if(e.undoMove(),u===T)return T;c=Math.max(c,u)}else e.undoMove()}if(c<i){let d=Array.from(e.legalMoves()).map(u=>{e.makeMove(u);let x=E(e,s);return e.undoMove(),{score:-x,move:u}}).sort((u,x)=>u.score-x.score);for(const u of d)if(o>0||-u.score>=q&&E(e,s)-u.score>c){e.makeMove(u.move);let x=-this.bound(e,1-i,o-1,s+1,!1,r);if(e.undoMove(),x===T)return T;if(c=Math.max(c,x),c>=i){this.moveTable.size>=j&&this.moveTable.clear(),this.moveTable.set(e.hash,u.move);break}}else break}return this.scoreTable.size>=j&&this.scoreTable.clear(),c>=i?this.scoreTable.set({hash:e.hash,depth:o,isRoot:l},{lower:c,upper:a.upper}):c<i&&this.scoreTable.set({hash:e.hash,depth:o,isRoot:l},{lower:a.lower,upper:c}),c}search(e,i,o,s){this.durationMS=i,this.nodes=0,this.depth=0,this.seldepth=0,this.startTime=new Date().getTime();let l=null;for(this.depth=1;this.depth<=(o===void 0?100:o);this.depth++){let r=-g,a=g;for(;r<a-Z;){let d=Math.floor((r+a+1)/2),u=this.bound(e,d,this.depth,0,!0,s);if(u===T){r=T;break}u>=d?r=u:a=u}if(r===T)break;let c=this.bound(e,r,this.depth,0,!0,s);if(c===T||(console.log(`DEPTH ${this.depth} SCORE ${c} NODES ${this.nodes} TIME ${new Date().getTime()-this.startTime}`),l=this.moveTable.get(e.hash),new Date().getTime()-this.startTime>this.durationMS||c>g-10))break}return l}}let p=new N,H=null;const m='<svg viewBox="0 0 32 32" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">',k='<svg viewBox="-2.5 -2.5 50 50" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">';function B(t){switch(t.type){case n.Xiang:return L==="INT"?t.color===h.Blue?k+'<g id="black-bishop" class="black bishop" fill="none" fill-rule="evenodd" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9 36c3.39-.97 10.11.43 13.5-2 3.39 2.43 10.11 1.03 13.5 2 0 0 1.65.54 3 2-.68.97-1.65.99-3 .5-3.39-.97-10.11.46-13.5-1-3.39 1.46-10.11.03-13.5 1-1.354.49-2.323.47-3-.5 1.354-1.94 3-2 3-2zm6-4c2.5 2.5 12.5 2.5 15 0 .5-1.5 0-2 0-2 0-2.5-2.5-4-2.5-4 5.5-1.5 6-11.5-5-15.5-11 4-10.5 14-5 15.5 0 0-2.5 1.5-2.5 4 0 0-.5.5 0 2zM25 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 1 1 5 0z" fill="#000" stroke-linecap="butt"/><path d="M17.5 26h10M15 30h15m-7.5-14.5v5M20 18h5" stroke="#fff" stroke-linejoin="miter"/></g>':k+'<g id="white-bishop" class="white bishop" fill="none" fill-rule="evenodd" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><g fill="#fff" stroke-linecap="butt"><path d="M9 36c3.39-.97 10.11.43 13.5-2 3.39 2.43 10.11 1.03 13.5 2 0 0 1.65.54 3 2-.68.97-1.65.99-3 .5-3.39-.97-10.11.46-13.5-1-3.39 1.46-10.11.03-13.5 1-1.354.49-2.323.47-3-.5 1.354-1.94 3-2 3-2zM15 32c2.5 2.5 12.5 2.5 15 0 .5-1.5 0-2 0-2 0-2.5-2.5-4-2.5-4 5.5-1.5 6-11.5-5-15.5-11 4-10.5 14-5 15.5 0 0-2.5 1.5-2.5 4 0 0-.5.5 0 2zM25 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 1 1 5 0z"/></g><path d="M17.5 26h10M15 30h15m-7.5-14.5v5M20 18h5" stroke-linejoin="miter"/></g>':m+`<text x="4" y="24.5" style="font-size: 23px; font-weight: 500; font-family: 'Ma Shan Zheng', cursive;">\u76F8</text></svg>`;case n.Wang:return L==="INT"?t.color===h.Blue?k+'<g id="black-king" class="black king" fill="none" fill-rule="evenodd" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22.5 11.63V6" stroke-linejoin="miter"/><path d="M22.5 25s4.5-7.5 3-10.5c0 0-1-2.5-3-2.5s-3 2.5-3 2.5c-1.5 3 3 10.5 3 10.5" fill="#000" stroke-linecap="butt" stroke-linejoin="miter"/><path d="M11.5 37c5.5 3.5 15.5 3.5 21 0v-7s9-4.5 6-10.5c-4-6.5-13.5-3.5-16 4V27v-3.5c-3.5-7.5-13-10.5-16-4-3 6 5 10 5 10V37z" fill="#000"/><path d="M20 8h5" stroke-linejoin="miter"/><path d="M32 29.5s8.5-4 6.03-9.65C34.15 14 25 18 22.5 24.5l.01 2.1-.01-2.1C20 18 9.906 14 6.997 19.85c-2.497 5.65 4.853 9 4.853 9M11.5 30c5.5-3 15.5-3 21 0m-21 3.5c5.5-3 15.5-3 21 0m-21 3.5c5.5-3 15.5-3 21 0" stroke="#fff"/></g>':k+'<g id="white-king" class="white king" fill="none" fill-rule="evenodd" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22.5 11.63V6M20 8h5" stroke-linejoin="miter"/><path d="M22.5 25s4.5-7.5 3-10.5c0 0-1-2.5-3-2.5s-3 2.5-3 2.5c-1.5 3 3 10.5 3 10.5" fill="#fff" stroke-linecap="butt" stroke-linejoin="miter"/><path d="M11.5 37c5.5 3.5 15.5 3.5 21 0v-7s9-4.5 6-10.5c-4-6.5-13.5-3.5-16 4V27v-3.5c-3.5-7.5-13-10.5-16-4-3 6 5 10 5 10V37z" fill="#fff"/><path d="M11.5 30c5.5-3 15.5-3 21 0m-21 3.5c5.5-3 15.5-3 21 0m-21 3.5c5.5-3 15.5-3 21 0"/></g>':m+`<text x="4.5" y="24.5" style="font-size: 23px; font-weight: 500; font-family: 'Ma Shan Zheng', cursive;">\u738B</text></svg>`;case n.Jiang:return L==="INT"?t.color===h.Blue?k+'<g id="black-rook" class="black rook" fill="#000" fill-rule="evenodd" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9 39h27v-3H9v3zM12.5 32l1.5-2.5h17l1.5 2.5h-20zM12 36v-4h21v4H12z" stroke-linecap="butt"/><path d="M14 29.5v-13h17v13H14z" stroke-linecap="butt" stroke-linejoin="miter"/><path d="M14 16.5L11 14h23l-3 2.5H14zM11 14V9h4v2h5V9h5v2h5V9h4v5H11z" stroke-linecap="butt"/><path d="M12 35.5h21M13 31.5h19M14 29.5h17M14 16.5h17M11 14h23" fill="none" stroke="#fff" stroke-width="1" stroke-linejoin="miter"/></g>':k+'<g id="white-rook" class="white rook" fill="#fff" fill-rule="evenodd" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9 39h27v-3H9v3zM12 36v-4h21v4H12zM11 14V9h4v2h5V9h5v2h5V9h4v5" stroke-linecap="butt"/><path d="M34 14l-3 3H14l-3-3"/><path d="M31 17v12.5H14V17" stroke-linecap="butt" stroke-linejoin="miter"/><path d="M31 29.5l1.5 2.5h-20l1.5-2.5"/><path d="M11 14h23" fill="none" stroke-linejoin="miter"/></g>':m+`<text x="4.5" y="24.5" style="font-size: 23px; font-weight: 500; font-family: 'Ma Shan Zheng', cursive;">\u5C06</text></svg>`;case n.Zi:return L==="INT"?t.color===h.Blue?k+'<g id="black-pawn" class="black pawn"><path d="M22.5 9c-2.21 0-4 1.79-4 4 0 .89.29 1.71.78 2.38C17.33 16.5 16 18.59 16 21c0 2.03.94 3.84 2.41 5.03-3 1.06-7.41 5.55-7.41 13.47h23c0-7.92-4.41-12.41-7.41-13.47 1.47-1.19 2.41-3 2.41-5.03 0-2.41-1.33-4.5-3.28-5.62.49-.67.78-1.49.78-2.38 0-2.21-1.79-4-4-4z" stroke="#000" stroke-width="1.5" stroke-linecap="round"/></g>':k+'<g id="white-pawn" class="white pawn"><path d="M22.5 9c-2.21 0-4 1.79-4 4 0 .89.29 1.71.78 2.38C17.33 16.5 16 18.59 16 21c0 2.03.94 3.84 2.41 5.03-3 1.06-7.41 5.55-7.41 13.47h23c0-7.92-4.41-12.41-7.41-13.47 1.47-1.19 2.41-3 2.41-5.03 0-2.41-1.33-4.5-3.28-5.62.49-.67.78-1.49.78-2.38 0-2.21-1.79-4-4-4z" fill="#fff" stroke="#000" stroke-width="1.5" stroke-linecap="round"/></g>':m+`<text x="4.5" y="24.5" style="font-size: 23px; font-weight: 500; font-family: 'Ma Shan Zheng', cursive;">\u5B50</text></svg>`;case n.Hou:return L==="INT"?t.color===h.Blue?k+'<g id="black-queen" class="black queen" fill="#000" fill-rule="evenodd" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><g fill="#000" stroke="none"><circle cx="6" cy="12" r="2.75"/><circle cx="14" cy="9" r="2.75"/><circle cx="22.5" cy="8" r="2.75"/><circle cx="31" cy="9" r="2.75"/><circle cx="39" cy="12" r="2.75"/></g><path d="M9 26c8.5-1.5 21-1.5 27 0l2.5-12.5L31 25l-.3-14.1-5.2 13.6-3-14.5-3 14.5-5.2-13.6L14 25 6.5 13.5 9 26zM9 26c0 2 1.5 2 2.5 4 1 1.5 1 1 .5 3.5-1.5 1-1.5 2.5-1.5 2.5-1.5 1.5.5 2.5.5 2.5 6.5 1 16.5 1 23 0 0 0 1.5-1 0-2.5 0 0 .5-1.5-1-2.5-.5-2.5-.5-2 .5-3.5 1-2 2.5-2 2.5-4-8.5-1.5-18.5-1.5-27 0z" stroke-linecap="butt"/><path d="M11 38.5a35 35 1 0 0 23 0" fill="none" stroke-linecap="butt"/><path d="M11 29a35 35 1 0 1 23 0M12.5 31.5h20M11.5 34.5a35 35 1 0 0 22 0M10.5 37.5a35 35 1 0 0 24 0" fill="none" stroke="#fff"/></g>':k+'<g id="white-queen" class="white queen" fill="#fff" fill-rule="evenodd" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M8 12a2 2 0 1 1-4 0 2 2 0 1 1 4 0zM24.5 7.5a2 2 0 1 1-4 0 2 2 0 1 1 4 0zM41 12a2 2 0 1 1-4 0 2 2 0 1 1 4 0zM16 8.5a2 2 0 1 1-4 0 2 2 0 1 1 4 0zM33 9a2 2 0 1 1-4 0 2 2 0 1 1 4 0z"/><path d="M9 26c8.5-1.5 21-1.5 27 0l2-12-7 11V11l-5.5 13.5-3-15-3 15-5.5-14V25L7 14l2 12zM9 26c0 2 1.5 2 2.5 4 1 1.5 1 1 .5 3.5-1.5 1-1.5 2.5-1.5 2.5-1.5 1.5.5 2.5.5 2.5 6.5 1 16.5 1 23 0 0 0 1.5-1 0-2.5 0 0 .5-1.5-1-2.5-.5-2.5-.5-2 .5-3.5 1-2 2.5-2 2.5-4-8.5-1.5-18.5-1.5-27 0z" stroke-linecap="butt"/><path d="M11.5 30c3.5-1 18.5-1 22 0M12 33.5c6-1 15-1 21 0" fill="none"/></g>':m+`<text x="4.5" y="24.5" style="font-size: 23px; font-weight: 500; font-family: 'Ma Shan Zheng', cursive;">\u4FAF</text></svg>`}}function P(t,e){switch(e.color){case h.Yellow:t.style.backgroundColor="#ffe641";break;case h.Blue:t.style.backgroundColor="#3952f5";break}switch(e.type){case n.Xiang:t.innerHTML=`<div>${m}<path d="M0 0H8L0 8M24 0H32V8M32 24V32H24M0 32H8L0 24">
</path></svg>${B(e)}</div>`;break;case n.Jiang:t.innerHTML=`<div>${m}<path d="M0 22-6 16 0 10M10 32 16 38 22 32M32 22 38 16 32 10M22 0 16-6 10 0">
</path></svg>${B(e)}</div>`;break;case n.Wang:t.innerHTML=`<div>${m}<path d="M0 0H8L0 8M24 0H32V8M32 24V32H24M0 32H8L0 24M0 22-6 16 0 10M10 32 16 38 22 32M32 22 38 16 32 10M22 0 16-6 10 0">
</path></svg>${B(e)}</div>`;break;case n.Zi:t.innerHTML=`<div>${m}<path d="${(e==null?void 0:e.color)===h.Yellow?"M32 22 38 16 32 10":"M0 22-6 16 0 10"}">
</path></svg>${B(e)}</div>`;break;case n.Hou:t.innerHTML=`<div>${m}<path d="${(e==null?void 0:e.color)===h.Yellow?"M24 0H32V8M32 24V32H24M0 22-6 16 0 10M10 32 16 38 22 32M32 22 38 16 32 10M22 0 16-6 10 0":"M0 0H8L0 8M0 32H8L0 24M0 22-6 16 0 10M10 32 16 38 22 32M32 22 38 16 32 10M22 0 16-6 10 0"}">
</path></svg>${B(e)}</div>`;break}}function Y(){for(let i=0;i<12;i++){let o=p.board[i],s=document.querySelector(`#square${i}`);if(o===null){s.innerHTML="",s.style.backgroundColor="#fcfffc";continue}P(s,o)}const t=document.querySelector("#pool");let e=[];t.innerHTML="",p.pool.forEach((i,o)=>{if(i===void 0)return;let s=document.createElement("div");s.id="poolsq"+o,s.classList.add("square"),P(s,i),e.push(s)}),e.forEach(i=>t.appendChild(i))}function C(){for(let t=0;t<12;t++)document.querySelector(`#square${t}`).classList.remove("legal-move")}function $(t){C();for(const e of p.legalMoves())e.from===t&&document.querySelector(`#square${e.to}`).classList.add("legal-move")}let b=!0,J=new A,X=new A,L="CHN";async function I(t,e,i){return(p.colorToMove===h.Yellow?J:X).search(p,t,e,i)}function Q(){p=new N,W()}window.startGame=Q;const U=document.querySelector("#yellow-select"),_=document.querySelector("#blue-select"),O=document.querySelector("#status-value");function W(){if(C(),Y(),b=!1,p.status===M.YellowWin){alert("Yellow wins!"),O.innerHTML="Yellow wins",b=!0;return}else if(p.status===M.BlueWin){alert("Blue wins!"),O.innerHTML="Blue wins",b=!0;return}if(p.status===M.Draw){alert("Draw (by 20 non-capture moves)!"),O.innerHTML="Draw (by 20 non-capture moves)",b=!0;return}F()}function F(){switch(O.innerHTML=p.colorToMove===h.Yellow?"Yellow to Move":"Blue to Move",(p.colorToMove===h.Yellow?U:_).value){case"s1":b=!0,setTimeout(()=>{I(100).then(t=>{p.makeMove(t),W()})},300);break;case"s2":b=!0,setTimeout(()=>{I(600).then(t=>{p.makeMove(t),W()})},300);break;case"s3":b=!0,setTimeout(()=>{I(5e3,10).then(t=>{p.makeMove(t),W()})},300);break;case"h1":b=!0,setTimeout(()=>{I(500,void 0,!0).then(t=>{p.makeMove(t),W()})},300);break;case"h":b=!1;break}}function D(){const t=document.querySelector("#piece-type"),e=localStorage.getItem("pieceType");e!==null&&(L=e,t.value=e),document.onclick=i=>{if(!b){const o=i.target.id;if(o.startsWith("square")){const s=parseInt(o.split("square")[1]);for(const l of p.legalMoves())if(l.from===H&&l.to===s){p.makeMove(l),W();return}H===s?(C(),H=null):($(s),H=s)}else if(o.startsWith("poolsq")){const s=parseInt(o.split("poolsq")[1]);H===12+s?(C(),H=null):($(12+s),H=12+s)}else C(),H=null}};for(let i=0;i<12;i++)document.querySelector("#board").innerHTML+=`<div class='square' id='square${i}'"></div>`;Y(),t.onchange=()=>{L=t.value,localStorage.setItem("pieceType",L),Y()}}D();
